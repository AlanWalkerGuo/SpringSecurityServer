<!DOCTYPE html>
<html>	
<head>
<title>Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<meta name="keywords" content="Flat Dark Web Login Form Responsive Templates, Iphone Widget Template, Smartphone login forms,Login form, Widget Template, Responsive Templates, a Ipad 404 Templates, Flat Responsive Templates" />
<link href="css/style.css" rel='stylesheet' type='text/css' />
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
</head>
<body>
 <h1>klasikal Login Form</h1>
<div class="login-form">
	<div class="close"> </div>
		<div class="head-info">
			<label class="lbl-1"> </label>
			<label class="lbl-2"> </label>
			<label class="lbl-3"> </label>
		</div>
			<div class="clear"> </div>
	<div class="avtar">
		<img src="images/avtar.png" />
	</div>
<!--	<form action="/guoshsecurity/authentication/form" method="post">-->
			<input type="text" class="text" value="" name="username" id="username">
			<div class="key">
				<input type="password" value="" name="password" id="password">
			</div>
			<input type="text"  value="" name="imageCode" id="imageCode">
			<img src="/guoshsecurity/code/image?width=100">

			<input type="checkbox" name="remember-me" >记住我
		<div class="signin">
			<input type="submit" value="Login" onclick="gologin()">
		</div>
<!--	</form>-->
</div>
 <script>
	function gologin(){
		$.ajax({
			//请求方式get/post
			type:"post",
			//请求地址
			url:"/guoshsecurity/authentication/form",
			//请求参数没有可以不写
			data:"username="+$("#username").val()+"&password="+$("#password").val()+"&imageCode="+$("#imageCode").val(),
			//声明响应格式json格式，则success中的参数就是解析后的js对象
			dataType:"json",
			success:function(response){
				var url=window.location.href;
				if(url.indexOf('#')!=-1){
					alert("http://127.0.0.1:8080/guoshsecurity/"+url.substring(url.indexOf('#')))
					window.location.href="http://127.0.0.1:8080/guoshsecurity/"+url.substring(url.indexOf('#'))
				}else{
					window.location.href="http://127.0.0.1:8080/guoshsecurity/#/";
				}
			},
			error(response) {
				alert(response.responseJSON.object);
			}
		});

	}
</script>
</body>
</html>